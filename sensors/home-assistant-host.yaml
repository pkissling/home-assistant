---

- platform: snmp
  host: home-assistant
  community: public
  name: HA uptime
  baseoid: 1.3.6.1.2.1.25.1.1.0
  value_template: >
    {%- set time = value | int // 100 %}
    {%- set minutes = ((time % 3600) // 60) %}
    {%- set minutes = '{} min'.format(minutes) if minutes > 0 else '' %}
    {%- set hours = ((time % 86400) // 3600) %}
    {%- set hours = '{} hr '.format(hours) if hours > 0 else '' %}
    {%- set days = (time // 86400) %}
    {%- set days = '{} d '.format(days) if days > 0 else '' %}
    {{ 'Less than 1 min' if time < 60 else days + hours + minutes }}

- platform: command_line
  name: HA CPU Temp
  command: 'cat /host/temp'
  unit_of_measurement: "ÂºC"
  value_template: '{{ value | multiply(0.001) }}'

- platform: command_line
  name: HA Memory Usage
  command: echo $(($(cat /host/meminfo | grep MemFree | awk '{print $2}') * 100 / $(cat /host/meminfo | grep MemTotal | awk '{print $2}')))
  unit_of_measurement: "%"

- platform: command_line
  name: HA CPU Usage
  command: awk -v a="$(awk '/cpu /{print $2+$4,$2+$4+$5}' /host/stat; sleep 1)" '/cpu /{split(a,b," "); print 100*($2+$4-b[1])/($2+$4+$5-b[2])}'  /host/stat
  unit_of_measurement: "%"
